</html>
<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BD LIVE TV - Pro Player</title>
    
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.4.12"></script>
    
    <style>
        :root { --accent: #00f2fe; --bg: #050505; --card-bg: rgba(255, 255, 255, 0.1); }
        body { background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; }

        /* ‡¶Æ‡ßá‡¶á‡¶® ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶™‡ßç‡¶≤‡ßá‡ßü‡¶æ‡¶∞ */
        #videoContainer { width: 100vw; height: 100vh; position: fixed; top: 0; left: 0; z-index: 1; background: #000; }
        video { width: 100%; height: 100%; object-fit: contain; }

        /* ‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶¨‡¶æ‡¶∞ */
        .top-bar {
            position: fixed; top: 0; width: 100%; z-index: 100;
            padding: 20px 40px; display: flex; justify-content: space-between; align-items: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);
            transition: 0.5s;
        }
        .logo { font-size: 22px; font-weight: bold; color: var(--accent); }

        /* ‡¶ï‡¶ø‡¶â‡¶Ü‡¶∞ ‡¶ï‡ßã‡¶° ‡¶¨‡¶ï‡ßç‡¶∏ */
        .qr-section { background: #fff; padding: 10px; border-radius: 12px; display: none; position: absolute; top: 60px; right: 40px; }
        .qr-btn:focus + .qr-section, .qr-btn:hover + .qr-section { display: block; }

        /* ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü */
        .bottom-ui {
            position: fixed; bottom: 0; width: 100%; z-index: 50;
            background: linear-gradient(to top, rgba(0,0,0,0.95), transparent);
            padding: 30px 0; transition: transform 0.5s;
        }
        .channel-tray { display: flex; gap: 15px; overflow-x: auto; padding: 10px 40px; scroll-behavior: smooth; }
        .channel-tray::-webkit-scrollbar { display: none; }

        /* ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
        .tv-card {
            min-width: 160px; height: 90px; background: var(--card-bg);
            border-radius: 15px; display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.3s; border: 2px solid transparent; outline: none;
            font-weight: bold; text-align: center; backdrop-filter: blur(10px);
        }
        .tv-card:focus { border-color: var(--accent); transform: scale(1.1); background: rgba(0, 242, 254, 0.2); }

        /* ‡¶π‡¶æ‡¶á‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ */
        .hidden { transform: translateY(100%); opacity: 0; }
    </style>
</head>
<body>

    <div id="videoContainer">
        <video id="mainPlayer" autoplay muted playsinline controls></video>
    </div>

    <div class="top-bar" id="header">
        <div class="logo">BD LIVE TV</div>
        <div style="position: relative;">
            <button class="qr-btn" style="background: var(--accent); border: none; padding: 8px 15px; border-radius: 20px; font-weight: bold; cursor: pointer; outline: none;">üì± ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶∞‡¶ø‡¶Æ‡ßã‡¶ü</button>
            <div class="qr-section" id="qrContainer">
                <img id="qrImg" src="" alt="QR" width="120">
                <p style="color: #000; font-size: 10px; margin: 5px 0 0; text-align: center;">‡¶∏‡ßç‡¶ï‡ßç‡¶Ø‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</p>
            </div>
        </div>
    </div>

    <div class="bottom-ui" id="bottomUI">
        <div id="playingNow" style="margin-left: 45px; font-size: 1.2rem; margin-bottom: 10px; color: var(--accent);">‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
        <div class="channel-tray" id="tray"></div>
    </div>

<script>
    const m3uUrl = "https://raw.githubusercontent.com/soheltanver85-a11y/Live-tv/refs/heads/main/Live%20tv";
    const video = document.getElementById('mainPlayer');
    const tray = document.getElementById('tray');
    let hls = null;
    let uiTimer;

    // ‡ßß. ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
    async function init() {
        try {
            const res = await fetch(m3uUrl);
            const data = await res.text();
            const lines = data.split('\n');
            const channels = [];
            
            for (let i = 0; i < lines.length; i++) {
                if (lines[i].includes('#EXTINF')) {
                    const name = lines[i].split(',')[1] || "Unnamed";
                    const url = lines[i+1]?.trim();
                    if(url && url.startsWith('http')) channels.push({ name, url });
                }
            }
            render(channels);
            setupQR();
        } catch (e) {
            document.getElementById('playingNow').innerText = "‡¶®‡ßá‡¶ü‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶ï ‡¶è‡¶∞‡¶∞! ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§";
        }
    }

    // ‡ß®. ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø
    function render(channels) {
        tray.innerHTML = '';
        channels.forEach((ch, index) => {
            const card = document.createElement('div');
            card.className = 'tv-card';
            card.tabIndex = 0;
            card.innerText = ch.name;
            
            card.onclick = () => play(ch.url, ch.name);
            card.onkeydown = (e) => { if(e.key === 'Enter') play(ch.url, ch.name); };
            
            tray.appendChild(card);
        });

        if(channels.length > 0) play(channels[0].url, channels[0].name);
        setTimeout(() => tray.firstChild.focus(), 1000);
    }

    // ‡ß©. ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶™‡ßç‡¶≤‡ßá‡ßü‡¶æ‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï
    function play(url, name) {
        document.getElementById('playingNow').innerText = "‡¶ö‡¶≤‡¶õ‡ßá: " + name;
        if (hls) hls.destroy();

        if (Hls.isSupported()) {
            hls = new Hls({ maxBufferLength: 10 });
            hls.loadSource(url);
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, () => {
                video.play().catch(() => console.log("Auto-play blocked"));
            });
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            video.src = url;
        }
        showUI();
    }

    // ‡ß™. ‡¶ï‡¶ø‡¶â‡¶Ü‡¶∞ ‡¶ï‡ßã‡¶° ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™
    function setupQR() {
        const currentUrl = window.location.href;
        document.getElementById('qrImg').src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(currentUrl)}`;
    }

    // ‡ß´. ‡¶á‡¶â‡¶Ü‡¶á ‡¶Ö‡¶ü‡ßã-‡¶π‡¶æ‡¶á‡¶°
    function showUI() {
        document.getElementById('header').classList.remove('hidden');
        document.getElementById('bottomUI').classList.remove('hidden');
        clearTimeout(uiTimer);
        uiTimer = setTimeout(() => {
            if (document.activeElement.tagName !== 'DIV' && document.activeElement.tagName !== 'BUTTON') {
                document.getElementById('header').classList.add('hidden');
                document.getElementById('bottomUI').classList.add('hidden');
            }
        }, 5000);
    }

    // ‡¶∞‡¶ø‡¶Æ‡ßã‡¶ü ‡¶è‡¶∞‡ßã ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü
    document.addEventListener('keydown', (e) => {
        showUI();
        if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
            // ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡¶ø‡¶ï ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡ßá‡¶≤ ‡¶ï‡¶∞‡¶¨‡ßá tabIndex ‡¶è‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£‡ßá
        }
    });

    document.addEventListener('mousemove', showUI);
    init();
</script>
</body>
</html>
