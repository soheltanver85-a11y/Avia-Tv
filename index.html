<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>Live TV Pro</title>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <style>
    body { margin:0; font-family:'Segoe UI',sans-serif; background:#111; color:#fff; }
    header { background:#222; padding:10px 20px; display:flex; justify-content:space-between; align-items:center; }
    header h1 { margin:0; font-size:20px; color:#0ff; }
    #player { width:100%; height:220px; background:black; }
    video { width:100%; height:100%; object-fit:contain; }
    #categories { display:flex; gap:10px; overflow-x:auto; padding:10px; background:#1a1a1a; }
    .cat { padding:6px 12px; background:#333; border-radius:6px; cursor:pointer; }
    .cat.active { background:#ff4081; }
    #channelList { display:flex; overflow-x:auto; gap:12px; padding:10px; }
    .channel-card { min-width:140px; background:#222; border-radius:8px; padding:10px; text-align:center; }
    .channel-logo { width:100%; height:80px; object-fit:contain; margin-bottom:8px; }
    .channel-name { font-size:14px; margin-bottom:6px; }
    .watchBtn { background:#ff4081; border:none; padding:6px 10px; border-radius:5px; color:#fff; cursor:pointer; }
    footer { background:#111; text-align:center; padding:8px; font-size:12px; border-top:1px solid #333; }
  </style>
</head>
<body>
  <header>
    <h1>ðŸ“º Live TV Pro</h1>
    <span id="channelCount"></span>
  </header>

  <div id="player">
    <video id="video" controls autoplay></video>
  </div>

  <div id="categories"></div>
  <div id="channelList"></div>

  <footer>Â© 2026 Live TV Pro | Developed by Sohel</footer>

<script>
const playlistUrl="https://raw.githubusercontent.com/soheltanver85-a11y/Live-tv/refs/heads/main/Live%20tv";
let channels=[],currentIndex=0;

async function loadPlaylist(){
  const res=await fetch(playlistUrl); const text=await res.text();
  const lines=text.split("\n"); let list=[],currentName="",currentGroup="",currentLogo="";
  for(let line of lines){
    if(line.startsWith("#EXTINF")){
      let parts=line.split(",");
      currentName=parts[1];
      let groupMatch=line.match(/group-title="([^"]+)"/);
      currentGroup=groupMatch?groupMatch[1]:"Others";
      let logoMatch=line.match(/tvg-logo="([^"]+)"/);
      currentLogo=logoMatch?logoMatch[1]:"default.png";
    } else if(line.startsWith("http")){
      list.push({ name: currentName, url: line, group: currentGroup, logo: currentLogo });
    }
  }
  return list;
}

function playChannel(url){
  const video=document.getElementById("video");
  if(Hls.isSupported()){ const hls=new Hls(); hls.loadSource(url); hls.attachMedia(video); }
  else if(video.canPlayType("application/vnd.apple.mpegurl")){ video.src=url; }
}

function renderCategories(groups){
  const catDiv=document.getElementById("categories"); catDiv.innerHTML="";
  ["All",...groups].forEach(g=>{
    const btn=document.createElement("div"); btn.className="cat"; btn.textContent=g;
    btn.onclick=()=>filterByGroup(g);
    catDiv.appendChild(btn);
  });
}

function renderChannels(list){
  const grid=document.getElementById("channelList"); grid.innerHTML="";
  list.forEach((ch,i)=>{
    const card=document.createElement("div"); card.className="channel-card";
    card.innerHTML=`<img src="${ch.logo}" class="channel-logo">
                    <div class="channel-name">${ch.name}</div>
                    <button class="watchBtn">Watch Now</button>`;
    card.querySelector(".watchBtn").onclick=()=>{currentIndex=i;playChannel(ch.url);};
    grid.appendChild(card);
  });
  document.getElementById("channelCount").textContent=list.length+" CHANNELS";
}

function filterByGroup(group){
  document.querySelectorAll(".cat").forEach(c=>c.classList.remove("active"));
  [...document.querySelectorAll(".cat")].find(c=>c.textContent===group).classList.add("active");
  if(group==="All"){ renderChannels(channels); }
  else { renderChannels(channels.filter(ch=>ch.group===group)); }
}

async function init(){
  channels=await loadPlaylist(); 
  renderChannels(channels);
  const groups=[...new Set(channels.map(ch=>ch.group))];
  renderCategories(groups);
  if(channels.length>0){ playChannel(channels[0].url); }
}
init();
</script>
</body>
</html>
