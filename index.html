<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡¶≤‡¶æ‡¶á‡¶≠ ‡¶ü‡¶ø‡¶≠‡¶ø</title>
  <style>
    body { background:#000; color:#fff; text-align:center; margin:0; }
    video { width:90%; max-width:900px; margin:20px auto; border:2px solid #fff; border-radius:10px; }
    #ytPlayer { width:90%; max-width:900px; height:500px; margin:20px auto; display:none; }
    #spinner {
      position: fixed; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      border: 6px solid #f3f3f3;
      border-top: 6px solid #3498db;
      border-radius: 50%;
      width: 50px; height: 50px;
      animation: spin 1s linear infinite;
      display: none;
    }
    @keyframes spin {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
  </style>
</head>
<body>
  <h2>üì∫ ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶ü‡¶ø‡¶≠‡¶ø</h2>

  <video id="tvPlayer" controls autoplay></video>
  <div id="ytPlayer"></div>
  <div id="spinner"></div>

  <!-- ‡¶≤‡¶æ‡¶á‡¶¨‡ßç‡¶∞‡ßá‡¶∞‡¶ø -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
    let ytPlayer;

    function onYouTubeIframeAPIReady() {
      ytPlayer = new YT.Player("ytPlayer", {
        height: "500",
        width: "900",
        videoId: "",
        events: { "onReady": (event) => event.target.playVideo() }
      });
    }

    function playAuto(url) {
      const video = document.getElementById("tvPlayer");
      const spinner = document.getElementById("spinner");
      spinner.style.display = "block";

      // YouTube ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ö‡ßá‡¶ï
      if (url.includes("youtube.com") || url.includes("youtu.be") || url.includes("googlevideo.com")) {
        const videoIdMatch = url.match(/(?:v=|\/)([0-9A-Za-z_-]{11})/);
        const videoId = videoIdMatch ? videoIdMatch[1] : "o3cT0X_evvc";
        video.style.display = "none";
        document.getElementById("ytPlayer").style.display = "block";
        ytPlayer.loadVideoById(videoId);
        spinner.style.display = "none";
        return;
      }

      // DASH (.mpd) ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ö‡ßá‡¶ï
      if (url.endsWith(".mpd")) {
        video.style.display = "block";
        document.getElementById("ytPlayer").style.display = "none";
        const player = dashjs.MediaPlayer().create();
        player.initialize(video, url, true);
        spinner.style.display = "none";
        return;
      }

      // HLS (.m3u8) ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ö‡ßá‡¶ï
      if (url.endsWith(".m3u8")) {
        video.style.display = "block";
        document.getElementById("ytPlayer").style.display = "none";
        if (Hls.isSupported()) {
          const hls = new Hls();
          hls.loadSource(url);
          hls.attachMedia(video);
          hls.on(Hls.Events.MANIFEST_PARSED, () => {
            video.play();
            spinner.style.display = "none";
          });
        } else if (video.canPlayType("application/vnd.apple.mpegurl")) {
          video.src = url;
          video.addEventListener("loadedmetadata", () => {
            video.play();
            spinner.style.display = "none";
          });
        }
        return;
      }

      spinner.style.display = "none";
      alert("‚ö†Ô∏è ‡¶è‡¶á ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡¶ü‡¶ø ‡¶∏‡¶Æ‡¶∞‡ßç‡¶•‡¶ø‡¶§ ‡¶®‡ßü!");
    }

    // ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞:
    // playAuto("https://owrcovcrpy.gpcdn.net/bpk-tv/1716/output/index.m3u8"); // NTV (HLS)
    // playAuto("https://d1g8wgjurz8via.cloudfront.net/bpk-tv/Zeecinema/default/manifest.mpd"); // Zee Cinema (DASH)
    // playAuto("https://www.youtube.com/watch?v=o3cT0X_evvc"); // Somoy TV (YouTube)
  </script>
</body>
</html>
