<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>PRO TV LIVE</title>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <style>
    body {
      margin:0; font-family:'Segoe UI',sans-serif;
      background:#111; color:#fff;
      display:flex; flex-direction:column; height:100vh;
    }
    header {
      background:rgba(20,20,20,0.9); backdrop-filter:blur(10px);
      padding:10px 20px; display:flex; justify-content:space-between; align-items:center;
      border-bottom:1px solid #333;
    }
    header h1 { margin:0; font-size:20px; }
    #player { flex:0 0 220px; position:relative; background:black; display:flex; justify-content:center; align-items:center; }
    video { width:100%; height:100%; object-fit:contain; }
    #overlay {
      position:absolute; bottom:10px; left:50%; transform:translateX(-50%);
      background:rgba(0,0,0,0.6); backdrop-filter:blur(5px);
      padding:6px 12px; border-radius:6px; font-size:16px; display:none;
      animation:fadeInOut 2s ease;
    }
    @keyframes fadeInOut { 0%{opacity:0;}20%{opacity:1;}80%{opacity:1;}100%{opacity:0;} }
    #searchBar {
      padding:10px; border:none; width:90%; margin:10px auto; border-radius:5px;
      display:block; font-size:14px;
    }
    #channelGrid {
      flex:1; overflow-y:auto;
      display:grid; grid-template-columns:repeat(auto-fill,minmax(120px,1fr));
      gap:12px; padding:10px;
    }
    .channel-card {
      background:#222; border-radius:8px; padding:10px;
      text-align:center; transition:transform 0.3s ease; cursor:pointer;
    }
    .channel-card:hover { transform:scale(1.05); background:#333; }
    .channel-logo { width:100%; height:80px; object-fit:contain; margin-bottom:8px; }
    .channel-name { font-size:14px; color:#fff; }
    footer {
      background:#111; text-align:center; padding:8px; font-size:12px; border-top:1px solid #333;
    }
  </style>
</head>
<body>
  <header>
    <h1>ðŸ“º PRO TV LIVE</h1>
    <span id="channelCount"></span>
  </header>

  <div id="player">
    <video id="video" controls autoplay></video>
    <div id="overlay"></div>
  </div>

  <input type="text" id="searchBar" placeholder="à¦šà§à¦¯à¦¾à¦¨à§‡à¦² à¦–à§à¦à¦œà§à¦¨...">

  <div id="channelGrid"></div>

  <footer>Â© 2026 PRO TV | Developed by Sohel</footer>

<script>
const playlistUrl="https://raw.githubusercontent.com/soheltanver85-a11y/Live-tv/refs/heads/main/Live%20tv";
let channels=[],currentIndex=0;

async function loadPlaylist(){
  const res=await fetch(playlistUrl); const text=await res.text();
  const lines=text.split("\n"); let list=[],currentName="",currentGroup="",currentLogo="";
  for(let line of lines){
    if(line.startsWith("#EXTINF")){
      let parts=line.split(",");
      currentName=parts[1];
      let groupMatch=line.match(/group-title="([^"]+)"/);
      currentGroup=groupMatch?groupMatch[1]:"Others";
      let logoMatch=line.match(/tvg-logo="([^"]+)"/);
      currentLogo=logoMatch?logoMatch[1]:"default.png"; // fallback logo
    } else if(line.startsWith("http")){
      list.push({ name: currentName, url: line, group: currentGroup, logo: currentLogo });
    }
  }
  return list;
}

function playChannel(url,name){
  const video=document.getElementById("video");
  if(Hls.isSupported()){
    const hls=new Hls(); hls.loadSource(url); hls.attachMedia(video);
  } else if(video.canPlayType("application/vnd.apple.mpegurl")){
    video.src=url;
  }
  showOverlay(name);
  localStorage.setItem("lastChannel",url);
  localStorage.setItem("lastName",name);
}

function showOverlay(name){
  const overlay=document.getElementById("overlay");
  overlay.textContent="â–¶ "+name;
  overlay.style.display="block";
  setTimeout(()=>overlay.style.display="none",2000);
}

function renderChannels(list){
  const grid=document.getElementById("channelGrid"); grid.innerHTML="";
  list.forEach((ch,i)=>{
    const card=document.createElement("div"); card.className="channel-card";
    card.innerHTML=`<img src="${ch.logo}" class="channel-logo" alt="${ch.name}">
                    <div class="channel-name">${ch.name}</div>`;
    card.onclick=()=>{currentIndex=i;playChannel(ch.url,ch.name);};
    grid.appendChild(card);
  });
  document.getElementById("channelCount").textContent=list.length+" CHANNELS";
}

document.getElementById("searchBar").addEventListener("input",(e)=>{
  const term=e.target.value.toLowerCase();
  const filtered=channels.filter(ch=>ch.name.toLowerCase().includes(term));
  renderChannels(filtered);
});

document.addEventListener("keydown",(e)=>{
  if(e.key==="ArrowRight"){currentIndex=(currentIndex+1)%channels.length;playChannel(channels[currentIndex].url,channels[currentIndex].name);}
  else if(e.key==="ArrowLeft"){currentIndex=(currentIndex-1+channels.length)%channels.length;playChannel(channels[currentIndex].url,channels[currentIndex].name);}
});

async function init(){
  channels=await loadPlaylist(); renderChannels(channels);
  let last=localStorage.getItem("lastChannel"); let lastName=localStorage.getItem("lastName");
  if(last){playChannel(last,lastName);} else if(channels.length>0){playChannel(channels[0].url,channels[0].name);}
}
init();
</script>
</body>
</html>
