<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>PRO TV LIVE</title>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <style>
    body { margin:0; font-family:'Segoe UI',sans-serif; background:#111; color:#fff; display:flex; flex-direction:column; height:100vh; }
    header { background:rgba(20,20,20,0.9); backdrop-filter:blur(10px); padding:10px 20px; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #333; }
    header h1 { margin:0; font-size:20px; }
    #player { flex:0 0 220px; position:relative; background:black; display:flex; justify-content:center; align-items:center; }
    video { width:100%; height:100%; object-fit:contain; }
    #overlay { position:absolute; bottom:10px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.6); backdrop-filter:blur(5px); padding:6px 12px; border-radius:6px; font-size:16px; display:none; animation:fadeInOut 2s ease; }
    @keyframes fadeInOut { 0%{opacity:0;}20%{opacity:1;}80%{opacity:1;}100%{opacity:0;} }
    #searchBar { padding:10px; border:none; width:90%; margin:10px auto; border-radius:5px; display:block; font-size:14px; }
    #tabs { display:flex; justify-content:center; gap:10px; margin:10px; }
    #tabs button { padding:6px 12px; border:none; border-radius:5px; cursor:pointer; background:#333; color:#fff; }
    #tabs button.active { background:#555; }
    #channelGrid { flex:1; overflow-y:auto; display:grid; grid-template-columns:repeat(auto-fill,minmax(120px,1fr)); gap:12px; padding:10px; }
    .channel-card { background:#222; border-radius:8px; padding:10px; text-align:center; transition:transform 0.3s ease; cursor:pointer; position:relative; }
    .channel-card:hover { transform:scale(1.05); background:#333; }
    .channel-logo { width:100%; height:80px; object-fit:contain; margin-bottom:8px; }
    .channel-name { font-size:14px; color:#fff; }
    .fav-btn { position:absolute; top:8px; right:8px; background:#444; border:none; border-radius:50%; color:#fff; width:24px; height:24px; cursor:pointer; }
    .fav-btn.active { background:#e91e63; }
    #pipBtn,#micBtn { position:absolute; top:10px; right:10px; background:#444; color:#fff; border:none; padding:6px 10px; border-radius:5px; cursor:pointer; font-size:12px; margin-left:5px; }
    #qr { margin:10px auto; }
    #multiWindow { display:grid; grid-template-columns:1fr 1fr; gap:10px; padding:10px; }
    #multiWindow video { width:100%; height:200px; background:black; }
    footer { background:#111; text-align:center; padding:8px; font-size:12px; border-top:1px solid #333; }
    #remoteUI { position:fixed; bottom:0; left:0; right:0; background:rgba(20,20,20,0.95); padding:10px; display:flex; flex-wrap:wrap; justify-content:center; gap:10px; }
    #remoteUI button { background:rgba(255,255,255,0.1); border:none; padding:10px 15px; border-radius:8px; color:#fff; font-size:14px; }
    #remoteUI button:hover { background:rgba(255,255,255,0.3); }
    .light-mode { background:#fff; color:#000; }
  </style>
</head>
<body>
  <header>
    <h1>üì∫ PRO TV LIVE</h1>
    <span id="channelCount"></span>
  </header>

  <div id="player">
    <video id="video" controls autoplay></video>
    <button id="pipBtn">PiP</button>
    <button id="micBtn">üé§</button>
    <div id="overlay"></div>
  </div>

  <input type="text" id="searchBar" placeholder="‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®...">

  <div id="tabs">
    <button id="allTab" class="active">All Channels</button>
    <button id="favTab">‚≠ê Favorites</button>
  </div>

  <div id="channelGrid"></div>

  <div id="qr"></div>

  <div id="multiWindow">
    <video id="video1" controls></video>
    <video id="video2" controls></video>
  </div>

  <!-- Remote UI -->
  <div id="remoteUI">
    <button onclick="sendCommand('previousChannel')">‚èÆ Prev</button>
    <button onclick="sendCommand('nextChannel')">‚è≠ Next</button>
    <button onclick="sendCommand('playPause')">‚èØ Play/Pause</button>
    <button onclick="sendCommand('volumeUp')">üîä+</button>
    <button onclick="sendCommand('volumeDown')">üîâ-</button>
    <button onclick="sendCommand('mute')">üîá Mute</button>
    <button onclick="sendCommand('pip')">üñº PiP</button>
    <button onclick="toggleTheme()">üåô/‚òÄÔ∏è</button>
    <button onclick="startVoice()">üé§ Voice</button>
  </div>

  <footer>¬© 2026 PRO TV | Developed by Sohel</footer>

<script>
const playlistUrl="https://raw.githubusercontent.com/soheltanver85-a11y/Live-tv/refs/heads/main/Live%20tv";
let channels=[],currentIndex=0,favorites=[];

// Load Playlist
async function loadPlaylist(){
  const res=await fetch(playlistUrl); const text=await res.text();
  const lines=text.split("\n"); let list=[],currentName="",currentGroup="",currentLogo="";
  for(let line of lines){
    if(line.startsWith("#EXTINF")){
      let parts=line.split(",");
      currentName=parts[1];
      let groupMatch=line.match(/group-title="([^"]+)"/);
      currentGroup=groupMatch?groupMatch[1]:"Others";
      let logoMatch=line.match(/tvg-logo="([^"]+)"/);
      currentLogo=logoMatch?logoMatch[1]:"default.png";
    } else if(line.startsWith("http")){
      list.push({ name: currentName, url: line, group: currentGroup, logo: currentLogo });
    }
  }
  return list;
}

// Play Channel
function playChannel(url,name){
  const video=document.getElementById("video");
  if(Hls.isSupported()){ const hls=new Hls(); hls.loadSource(url); hls.attachMedia(video); }
  else if(video.canPlayType("application/vnd.apple.mpegurl")){ video.src=url; }
  showOverlay(name);
  localStorage.setItem("lastChannel",url);
  localStorage.setItem("lastName",name);
}

// Overlay
function showOverlay(name){
  const overlay=document.getElementById("overlay");
  overlay.textContent="‚ñ∂ "+name;
  overlay.style.display="block";
  setTimeout(()=>overlay.style.display="none",2000);
}

// Render Channels
function renderChannels(list){
  const grid=document.getElementById("channelGrid"); grid.innerHTML="";
  list.forEach((ch,i)=>{
    const card=document.createElement("div"); card.className="channel-card";
    card.innerHTML=`<img src="${ch.logo}" class="channel-logo" alt="${ch.name}">
                    <div class="channel-name">${ch.name}</div>
                    <button class="fav-btn ${favorites.includes(ch.url)?'active':''}" onclick="toggleFavorite('${ch.url}','${ch.name}',this)">‚≠ê</button>`;
    card.onclick=()=>{currentIndex=i;playChannel(ch.url,ch.name);};
    grid.appendChild(card);
  });
  document.getElementById("channelCount").textContent=list.length+" CHANNELS";
}

// Toggle Favorite
function toggleFavorite(url,name,btn){
  if(favorites.includes(url)){
    favorites=favorites.filter(f=>f!==url);
    btn.classList.remove("active");
  } else {
    favorites.push(url);
    btn.classList.add("active");
  }
  local
