<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>Live TV Pro</title>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <style>
    body { margin:0; font-family:'Segoe UI',sans-serif; background:#111; color:#fff; }
    header { background:#222; padding:10px 20px; display:flex; justify-content:space-between; align-items:center; }
    header h1 { margin:0; font-size:20px; color:#0ff; }

    /* Sticky Player */
    #player { 
      width:100%; 
      height:50vh; 
      background:black; 
      position:sticky; 
      top:0; 
      z-index:999; 
    }
    video { width:100%; height:100%; object-fit:contain; }
    #liveLabel { position:absolute; top:10px; left:10px; background:red; padding:4px 8px; border-radius:4px; font-size:12px; }

    #info { padding:10px; background:#1a1a1a; }
    #info h2 { margin:0; font-size:16px; color:#ff4081; }
    #info p { margin:4px 0; font-size:12px; color:#aaa; }

    #controls { display:flex; gap:8px; align-items:center; padding:8px; background:#1a1a1a; }
    #searchBar { flex:1; padding:5px; border-radius:5px; border:none; }

    #categories { display:flex; gap:10px; overflow-x:auto; padding:10px; background:#1a1a1a; }
    .cat { padding:6px 12px; background:#333; border-radius:6px; cursor:pointer; }
    .cat.active { background:#ff4081; }

    #channelList { display:grid; grid-template-columns: repeat(3, 1fr); gap:16px; padding:10px; }
    .channel-card { background:#222; border-radius:8px; padding:10px; text-align:center; }
    .channel-logo { width:100%; height:100px; object-fit:contain; margin-bottom:8px; }
    .channel-name { font-size:14px; margin-bottom:6px; }
    .watchBtn, .favBtn { background:#ff4081; border:none; padding:4px 8px; border-radius:5px; color:#fff; cursor:pointer; margin:2px; font-size:11px; }

    footer { background:#111; text-align:center; padding:8px; font-size:12px; border-top:1px solid #333; }
    nav { position:fixed; bottom:0; width:100%; background:#222; display:flex; justify-content:space-around; padding:8px 0; }
    nav div { color:#fff; font-size:12px; text-align:center; }
  </style>
</head>
<body>
  <header>
    <h1>üì∫ Live TV Pro</h1>
    <span id="channelCount"></span>
  </header>

  <div id="player">
    <video id="video" controls autoplay></video>
    <div id="liveLabel">LIVE</div>
  </div>

  <div id="info">
    <h2 id="currentChannel">Somoy TV</h2>
    <p>Genres: Live Action</p>
  </div>

  <div id="controls">
    <input id="searchBar" placeholder="Search channels...">
    <button onclick="startVoiceControl()">üé§ Voice</button>
    <button onclick="togglePiP()">PiP</button>
    <button onclick="showFavorites()">‚≠ê Favorites</button>
  </div>

  <div id="categories"></div>
  <div id="channelList"></div>

  <nav>
    <div>üè† Home</div>
    <div>üì° Live</div>
    <div>üíé Premium</div>
    <div>üé¨ Movies</div>
    <div>‚öΩ Sports</div>
  </nav>

  <footer>¬© 2026 Live TV Pro | Developed by Sohel</footer>

<script>
const playlistUrl="https://raw.githubusercontent.com/soheltanver85-a11y/Live-tv/refs/heads/main/Live%20tv";
let channels=[],currentIndex=0;
let favorites=JSON.parse(localStorage.getItem("favorites"))||[];

async function loadPlaylist(){
  const res=await fetch(playlistUrl); const text=await res.text();
  const lines=text.split("\n"); let list=[],currentName="",currentGroup="",currentLogo="";
  for(let line of lines){
    if(line.startsWith("#EXTINF")){
      let parts=line.split(",");
      currentName=parts[1];
      let groupMatch=line.match(/group-title="([^"]+)"/);
      currentGroup=groupMatch?groupMatch[1]:"Others";
      let logoMatch=line.match(/tvg-logo="([^"]+)"/);
      currentLogo=logoMatch?logoMatch[1]:"default.png";
    } else if(line.startsWith("http")){
      list.push({ name: currentName, url: line, group: currentGroup, logo: currentLogo });
    }
  }
  return list;
}

function playChannel(ch){
  const video=document.getElementById("video");
  if(Hls.isSupported()){ const hls=new Hls(); hls.loadSource(ch.url); hls.attachMedia(video); }
  else if(video.canPlayType("application/vnd.apple.mpegurl")){ video.src=ch.url; }
  document.getElementById("currentChannel").textContent=ch.name;
}

function renderCategories(){
  const catDiv=document.getElementById("categories"); catDiv.innerHTML="";
  const groups=["All Channels","‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤","‡¶π‡¶ø‡¶®‡ßç‡¶¶‡¶ø ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤","Sports Channel"];
  groups.forEach(g=>{
    const btn=document.createElement("div"); btn.className="cat"; btn.textContent=g;
    btn.onclick=()=>filterByGroup(g);
    catDiv.appendChild(btn);
  });
}

function renderChannels(list){
  const grid=document.getElementById("channelList"); grid.innerHTML="";
  list.forEach((ch,i)=>{
    const card=document.createElement("div"); card.className="channel-card";
    card.innerHTML=`<img src="${ch.logo}" class="channel-logo">
                    <div class="channel-name">${ch.name}</div>
                    <button class="watchBtn">Watch</button>
                    <button class="favBtn">‚≠ê</button>`;
    card.querySelector(".watchBtn").onclick=()=>{currentIndex=i;playChannel(ch);};
    card.querySelector(".favBtn").onclick=()=>toggleFavorite(ch);
    grid.appendChild(card);
  });
  document.getElementById("channelCount").textContent=list.length+" CHANNELS";
}

function filterByGroup(group){
  document.querySelectorAll(".cat").forEach(c=>c.classList.remove("active"));
  [...document.querySelectorAll(".cat")].find(c=>c.textContent===group).classList.add("active");
  if(group==="All Channels"){ renderChannels(channels); }
  else if(group==="‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤"){ renderChannels(channels.filter(ch=>ch.group.toLowerCase().includes("bangla"))); }
  else if(group==="‡¶π‡¶ø‡¶®‡ßç‡¶¶‡¶ø ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤"){ renderChannels(channels.filter(ch=>ch.group.toLowerCase().includes("hindi"))); }
  else if(group==="Sports Channel"){ renderChannels(channels.filter(ch=>ch.group.toLowerCase().includes("sports"))); }
}

function toggleFavorite(ch){
  if(favorites.find(f=>f.url===ch.url)){
    favorites=favorites.filter(f=>f.url!==ch.url);
  } else {
    favorites.push(ch);
  }
  localStorage.setItem("favorites",JSON.stringify(favorites));
}

function showFavorites(){
  renderChannels(favorites);
}

function togglePiP(){
  const video=document.getElementById("video");
  if(document.pictureInPictureElement){ document.exitPictureInPicture(); }
  else { video.requestPictureInPicture(); }
}

function startVoiceControl(){
  const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;
  if(!SpeechRecognition){ alert("Voice not supported"); return; }
  const recognition=new SpeechRecognition();
  recognition.onresult=(event)=>{
    const command=event.results[0][0].transcript.toLowerCase();
    const match=channels.find(ch=>ch.name.toLowerCase().includes(command));
    if(match){ playChannel(match); }
  };
  recognition.start();
}

document.getElementById("searchBar").oninput=(e)=>{
  const q=e.target.value.toLowerCase();
  renderChannels(channels.filter(ch=>ch.name.toLowerCase().includes(q)));
};

async function init(){
  channels=await loadPlaylist(); 
  renderChannels(channels);
  renderCategories();
  if(channels.length>0){ playChannel(channels[0]); }
}
init();
</script>
</body>
</html>
